language: cpp
branches:
  only:
  - master
before_script:
- curl https://bazel.build/bazel-release.pub.gpg | sudo apt-key add -
- echo "deb [arch=amd64] https://storage.googleapis.com/bazel-apt stable jdk1.8" | sudo tee /etc/apt/sources.list.d/bazel.list
- sudo apt update && sudo apt install bazel
script:
- bazel test --host_force_python=PY2 ...
# - cmake --build .
# - cmake --build . --target test
# - cmake --build . --target package
deploy:
  provider: script
  skip_cleanup: true
  script:
  - echo "Deploy"
  # - curl -T helloworld-0.0.$TRAVIS_BUILD_NUMBER-Linux.deb -ualexey-ulashchick:$BINTRAY_API_KEY "https://api.bintray.com/content/alexey-ulashchick/otus-cpp/homework-1/$TRAVIS_BUILD_NUMBER/helloworld-0.0.$TRAVIS_BUILD_NUMBER-Linux.deb;deb_distribution=trusty;deb_component=main;deb_architecture=amd64;publish=1"
